---
import { useTranslations } from "../i18n/utils";

export interface Props {
  lang: "es" | "en" | "ca" | "it";
}

const { lang } = Astro.props;
const t = useTranslations(lang);
---

<section class="relative w-full h-[100dvh] overflow-hidden" id="hero-section">
  <!-- Video Background Container -->
  <!-- Video Background Container -->
  <div class="absolute inset-0 z-0 bg-transparent" id="hero-bg">
    <!-- Coastal Dynamic: Light background with subtle wave texture -->
    <video
      class="w-full h-full object-cover opacity-40 mix-blend-multiply contrast-125 saturate-125"
      autoplay
      muted
      loop
      playsinline
    >
      <source src="/videos/optimized-videos/HeroWaves.mp4" type="video/mp4" />
      tu navegador no soporta videos HTML5.
    </video>

    <!-- Light Overlay for "Sunlight" effect -->
    <div
      class="absolute inset-0 bg-gradient-to-b from-white/20 via-transparent to-[#f5f5f4]/40"
    >
    </div>
  </div>

  <!-- Content -->
  <div
    class="relative z-10 w-full h-full flex flex-col items-center justify-center text-center px-4"
    id="hero-content"
  >
    <h1
      class="text-[13vw] md:text-9xl lg:text-[14rem] font-serif italic text-white/90 opacity-0 translate-y-10 tracking-tighter leading-none"
      style="text-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);"
      id="hero-title"
    >
      {t("hero.title")}
    </h1>
    <p
      class="mt-8 text-xs md:text-sm font-sans uppercase tracking-[0.8em] text-white/80 opacity-0 translate-y-10 font-medium"
      style="text-shadow: 0 2px 4px rgba(0,0,0,0.8), 0 8px 16px rgba(0,0,0,0.6);"
      id="hero-subtitle"
    >
      {t("hero.subtitle")}
    </p>

    <!-- Scroll Indicator -->
    <div
      class="absolute bottom-20 md:bottom-10 left-1/2 -translate-x-1/2 opacity-0"
      id="scroll-indicator"
    >
      <div class="w-[1px] h-16 bg-stone-300 overflow-hidden">
        <div class="w-full h-full bg-stone-600 animate-scroll-down"></div>
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  // Initial Load Animation
  const tl = gsap.timeline();

  tl.to("#hero-title", {
    y: 0,
    opacity: 1,
    duration: 1.5,
    ease: "power3.out",
    delay: 0.5,
  })
    .to(
      "#hero-subtitle",
      {
        y: 0,
        opacity: 1,
        duration: 1.2,
        ease: "power3.out",
      },
      "-=1",
    )
    .to("#scroll-indicator", {
      opacity: 1,
      duration: 1,
      delay: 0.5,
    });

  // Scroll Parallax Effect
  gsap.to("#hero-bg", {
    scrollTrigger: {
      trigger: "#hero-section",
      start: "top top",
      end: "bottom top",
      scrub: true,
    },
    yPercent: 30, // Move background down slower than scroll
    scale: 1.1, // Slight zoom out
  });

  gsap.to("#hero-content", {
    scrollTrigger: {
      trigger: "#hero-section",
      start: "top top",
      end: "bottom top",
      scrub: true,
    },
    yPercent: -20, // Move text up faster
    autoAlpha: 0, // Fade out
  });
</script>

<style>
  @keyframes scroll-down {
    0% {
      transform: translateY(-100%);
    }
    100% {
      transform: translateY(100%);
    }
  }
  .animate-scroll-down {
    animation: scroll-down 2s cubic-bezier(0.77, 0, 0.175, 1) infinite;
  }
</style>
