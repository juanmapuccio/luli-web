---
import { useTranslations } from "../i18n/utils";

interface Props {
  lang: "es" | "en" | "ca" | "it";
}

const { lang } = Astro.props;
const t = useTranslations(lang);
---

<section class="relative w-full h-screen overflow-hidden" id="hero-section">
  <!-- Video Background Container -->
  <div class="absolute inset-0 z-0" id="hero-bg">
    <!-- Placeholder for video - Replace src with your local file /videos/ocean.mp4 -->
    <video
      class="w-full h-full object-cover opacity-90"
      autoplay
      muted
      loop
      playsinline
    >
      <source src="/videos/optimizated-videos/HeroWaves.mp4" type="video/mp4" />
      tu navegador no soporta videos HTML5.
    </video>
    <!-- Overlay gradient for text readability -->
    <div class="absolute inset-0 bg-black/20 mix-blend-overlay"></div>
    <div
      class="absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/30"
    >
    </div>
  </div>

  <!-- Content -->
  <div
    class="relative z-10 w-full h-full flex flex-col items-center justify-center text-center px-4"
    id="hero-content"
  >
    <h1
      class="text-6xl md:text-8xl lg:text-9xl font-cursive text-white tracking-wider opacity-0 translate-y-10"
      id="hero-title"
    >
      Lucia Puccio
    </h1>
    <p
      class="mt-6 text-xl md:text-2xl font-light text-white/90 tracking-widest uppercase opacity-0 translate-y-10"
      id="hero-subtitle"
    >
      {t("hero.subtitle")}
    </p>

    <!-- Scroll Indicator -->
    <div
      class="absolute bottom-10 left-1/2 -translate-x-1/2 opacity-0"
      id="scroll-indicator"
    >
      <div class="w-[1px] h-16 bg-white/50 overflow-hidden">
        <div class="w-full h-full bg-white animate-scroll-down"></div>
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  // Initial Load Animation
  const tl = gsap.timeline();

  tl.to("#hero-title", {
    y: 0,
    opacity: 1,
    duration: 1.5,
    ease: "power3.out",
    delay: 0.5,
  })
    .to(
      "#hero-subtitle",
      {
        y: 0,
        opacity: 1,
        duration: 1.2,
        ease: "power3.out",
      },
      "-=1",
    )
    .to("#scroll-indicator", {
      opacity: 1,
      duration: 1,
      delay: 0.5,
    });

  // Scroll Parallax Effect
  gsap.to("#hero-bg", {
    scrollTrigger: {
      trigger: "#hero-section",
      start: "top top",
      end: "bottom top",
      scrub: true,
    },
    yPercent: 30, // Move background down slower than scroll
    scale: 1.1, // Slight zoom out
  });

  gsap.to("#hero-content", {
    scrollTrigger: {
      trigger: "#hero-section",
      start: "top top",
      end: "bottom top",
      scrub: true,
    },
    yPercent: -20, // Move text up faster
    autoAlpha: 0, // Fade out
  });
</script>

<style>
  @keyframes scroll-down {
    0% {
      transform: translateY(-100%);
    }
    100% {
      transform: translateY(100%);
    }
  }
  .animate-scroll-down {
    animation: scroll-down 2s cubic-bezier(0.77, 0, 0.175, 1) infinite;
  }
</style>
